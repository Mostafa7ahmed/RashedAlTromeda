<div class="headerTitle px-3 ">
  <h3>{{ 'addService' | translate }}</h3>
</div>

<div class="bodyAdd h-100">
  <form [formGroup]="form" class="contentPopup d-flex flex-column ">

    <div class="fromGroup">
      <label for="title">{{ 'serviceName' | translate }}</label>
      <input id="title" type="text" placeholder="{{ 'enterServiceName' | translate }}" formControlName="name" />
      <small class="error-msg" *ngIf="form.get('name')?.touched && form.get('name')?.hasError('required')">
        {{ 'requiredField' | translate }}
      </small>
    </div>

    <div class="fromGroup">
      <label for="hour">{{ 'hours' | translate }}</label>
      <input id="hour" type="number" placeholder="{{ 'enterHours' | translate }}" formControlName="hours" />
      <small class="error-msg" *ngIf="form.get('hours')?.touched && form.get('hours')?.hasError('required')">
        {{ 'requiredField' | translate }}
      </small>
    </div>

    <div class="fromGroup">
      <label for="days">{{ 'days' | translate }}</label>
      <input id="days" type="number" placeholder="{{ 'enterDays' | translate }}" formControlName="days" />
      <small class="error-msg" *ngIf="form.get('days')?.touched && form.get('days')?.hasError('required')">
        {{ 'requiredField' | translate }}
      </small>
    </div>

    <div class="fromGroup">
      <label for="description">{{ 'serviceDescription' | translate }}</label>
      <textarea id="description" placeholder="{{ 'writeDescription' | translate }}" formControlName="description"></textarea>
      <small class="error-msg" *ngIf="form.get('description')?.touched && form.get('description')?.hasError('required')">
        {{ 'requiredField' | translate }}
      </small>
    </div>

    <div class="upload-images px-2 mt-3">
      <div class="upload-box" (click)="fileInputImages.click()">
        <img src="Icons/addimage.svg" alt="add-image" />
        <p class="title">{{ 'uploadImages' | translate }}</p>
        <label class="browse">{{ 'browse' | translate }}</label>
        <input type="file" #fileInputImages multiple accept="image/*" (change)="onFilesSelected($event)" hidden />
      </div>

      <div class="preview-section" *ngIf="images().length > 0">
        <div class="preview-header">
          <span>{{ 'uploadedImagesCount' | translate:{count: images().length} }}</span>
        </div>

        <div class="preview-list">
          <div class="preview-item" *ngFor="let img of images(); let i = index">
            <ng-container *ngIf="img.isUploading; else uploadedImage">
              <div class="loading-placeholder">
                <i class="fa-solid fa-spinner fa-spin"></i>
              </div>
            </ng-container>

            <ng-template #uploadedImage>
              <img [src]="baseUrl + img.url" alt="preview" />
              <button class="remove-btn" (click)="removeImage(i)">
                <i class="fa-solid fa-xmark"></i>
              </button>
              <label class="show-checkbox">
                <input type="checkbox" [checked]="img.show" (change)="selectOnlyThis(i)" />
                <span>{{ 'show' | translate }}</span>
              </label>
            </ng-template>
          </div>
        </div>
      </div>
    </div>

  </form>

  <div class="actions mt-5">
    <button (click)="add()" class="close-btn" [disabled]="form.invalid || isUploading()">
      {{ 'addServiceBtn' | translate }}
    </button>
  </div>
</div>
