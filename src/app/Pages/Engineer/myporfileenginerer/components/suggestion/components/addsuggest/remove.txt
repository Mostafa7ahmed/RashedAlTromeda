  // ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª
  private mediaRecorder!: MediaRecorder;
  private audioChunks: Blob[] = [];
  isRecording = signal<boolean>(false);
  audioUrl = signal<string | null>(null);

  async toggleRecording() {
    if (this.isRecording()) {
      this.stopRecording();
    } else {
      await this.startRecording();
    }
  }

  async startRecording() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      this.mediaRecorder = new MediaRecorder(stream);
      this.audioChunks = [];

      this.mediaRecorder.ondataavailable = (e) => {
        if (e.data.size > 0) {
          this.audioChunks.push(e.data);
        }
      };

      this.mediaRecorder.onstop = () => {
        const blob = new Blob(this.audioChunks, { type: 'audio/mp3' });
        const url = URL.createObjectURL(blob);
        this.audioUrl.set(url);
      };

      this.mediaRecorder.start();
      this.isRecording.set(true);
    } catch (err) {
      console.error('Microphone access denied:', err);
      alert('Ø±Ø¬Ø§Ø¡Ù‹ Ø§Ø³Ù…Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­.');
    }
  }

  stopRecording() {
    this.mediaRecorder.stop();
    this.isRecording.set(false);
  }

  deleteAudio() {
    if (this.audioUrl()) {
      URL.revokeObjectURL(this.audioUrl()!);
      this.audioUrl.set(null);
    }
  }



    <!-- Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
                    <button class="record-btn btn" *ngIf="!audioUrl()" (click)="toggleRecording()">
                        <i class="fa-solid" [ngClass]="isRecording() ? 'fa-stop' : 'fa-microphone'"></i>
                        <p class="m-0" [ngClass]="!isRecording() ? 'd-block' : 'd-none'"> ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª</p>

                    </button>

                    <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
                    <div class="record-indicator" *ngIf="isRecording()">
                        <span class="dot"></span>
                        <span>ÙŠØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¢Ù†...</span>
                    </div>


                    <!-- Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
                    <div *ngIf="audioUrl()" class="audio-player d-flex gap-2">
                        <audio controls [src]="audioUrl()"></audio>
                        <button class="btndelete" (click)="deleteAudio()">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>